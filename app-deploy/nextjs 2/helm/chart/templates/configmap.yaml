# @format
# Next.js Application Configuration
#
# Non-sensitive environment variables for the Next.js container.
# Sensitive values are injected via Kubernetes Secrets.

apiVersion: v1
kind: ConfigMap
metadata:
  name: nextjs-config
  annotations:
    kubernetes.io/description: "Next.js app environment variables and OpenTelemetry settings"
  namespace: nextjs-app
  labels: {{- include "nextjs.componentLabels" . | nindent 4}}
data:
  # Core Next.js
  NODE_ENV: "production"
  PORT: "3000"
  NEXT_TELEMETRY_DISABLED: "1"
  HOSTNAME: "0.0.0.0"

  # DynamoDB GSI names (server-side direct queries)
  DYNAMODB_GSI1_NAME: "GSI1"
  DYNAMODB_GSI2_NAME: "GSI2"

  # OpenTelemetry (Alloy sidecar present in Pod)
  OTEL_SDK_DISABLED: "false"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://localhost:4317"
  OTEL_SERVICE_NAME: "nextjs-app"
  OTEL_RESOURCE_ATTRIBUTES: "service.namespace=nextjs"
