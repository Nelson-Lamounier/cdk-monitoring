# @format
# Loki service â€” NodePort for cross-stack access
# NodePort 30100 allows ECS tasks to push logs via host IP
apiVersion: v1
kind: Service
metadata:
  name: loki
  annotations:
    kubernetes.io/description: "Exposes Loki push and query API on ports 3100 and 9096"
  namespace: monitoring
  labels:
    app: loki
spec:
  type: NodePort
  selector:
    app: loki
  ports:
    - name: http
      port: 3100
      targetPort: http
      nodePort: 30100
    - name: grpc
      port: 9096
      targetPort: grpc
